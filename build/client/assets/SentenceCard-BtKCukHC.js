import{a as g,p as e}from"./chunk-EPOLDU6W-Db15p_wQ.js";import{P as c,S as b,G as o,B as p,A as m}from"./api-TiMZYRdJ.js";import{T as n}from"./AuthProvider-B78M3Mu0.js";import{C as x,T as j}from"./Tooltip-CochBmdA.js";function w({searchQuery:i}){const l=g.useRef(null),t=g.useRef(""),u=g.useRef(0);return g.useEffect(()=>{u.current+=1;const h=`gcse-search-${u.current}`,a=()=>{if(l.current&&i){l.current.innerHTML="";const s=document.createElement("div");if(s.className="gcse-search",s.id=h,s.setAttribute("data-queryParameterName","search"),s.setAttribute("data-autoSearchOnLoad","true"),l.current.appendChild(s),window.google?.search?.cse?.element)try{window.google.search.cse.element.render({div:h,tag:"search",gname:h,attributes:{queryParameterName:"search",enableAutoComplete:!0}})}catch(r){console.error("Error rendering Google CSE:",r)}setTimeout(()=>{const r=l.current?.querySelector("input.gsc-input");if(r){r.value=i;const d=l.current?.querySelector("button.gsc-search-button");d&&(d.addEventListener("click",f=>{f.preventDefault(),f.stopPropagation()},{once:!0,capture:!0}),setTimeout(()=>d.click(),100))}},500)}};if(i!==t.current)if(t.current=i,window.google?.search?.cse)a();else{const s=setInterval(()=>{window.google?.search?.cse&&(clearInterval(s),a())},100);setTimeout(()=>clearInterval(s),1e4)}},[i]),e.jsxs(c,{p:"lg",radius:"md",withBorder:!0,mt:"lg",children:[e.jsxs(n,{size:"sm",c:"dimmed",mb:"md",fw:500,children:['Image Search Results for "',i,'"']}),e.jsx("div",{ref:l,id:"google-search-container"})]})}function k({phrase:i,selectedWord:l,wordData:t,isLoading:u,onBack:h,isForvoAudio:a=!1}){return e.jsxs(c,{p:"lg",radius:"md",withBorder:!0,children:[e.jsxs(b,{gap:"md",children:[e.jsxs(o,{justify:"space-between",align:"center",children:[e.jsx(p,{variant:"subtle",onClick:h,children:"â† Back to Sentence"}),e.jsxs(n,{fw:600,c:"dimmed",children:['Selected word: "',l,'"']})]}),u?e.jsx(n,{children:"Loading word data..."}):t?e.jsxs(b,{gap:"sm",children:[e.jsxs("div",{children:[e.jsx(n,{size:"sm",c:"dimmed",mb:"xs",children:"Base Form:"}),e.jsx(c,{p:"md",bg:"gray.0",radius:"sm",children:e.jsxs(o,{justify:"space-between",align:"center",children:[e.jsx(n,{fw:500,children:t.baseForm}),e.jsx(x,{value:t.baseForm,children:({copied:s,copy:r})=>e.jsx(j,{label:s?"Copied":"Copy",withArrow:!0,position:"left",children:e.jsx(m,{color:s?"teal":"gray",variant:"subtle",onClick:r,children:s?"âœ“":"ðŸ“‹"})})})]})})]}),e.jsxs("div",{children:[e.jsx(n,{size:"sm",c:"dimmed",mb:"xs",children:"English Translation:"}),e.jsx(c,{p:"md",bg:"gray.0",radius:"sm",children:e.jsxs(o,{justify:"space-between",align:"center",children:[e.jsx(n,{fw:500,children:t.englishTranslation}),e.jsx(x,{value:t.englishTranslation,children:({copied:s,copy:r})=>e.jsx(j,{label:s?"Copied":"Copy",withArrow:!0,position:"left",children:e.jsx(m,{color:s?"teal":"gray",variant:"subtle",onClick:r,children:s?"âœ“":"ðŸ“‹"})})})]})})]}),e.jsxs("div",{children:[e.jsx(n,{size:"sm",c:"dimmed",mb:"xs",children:"Russian Meaning:"}),e.jsx(c,{p:"md",bg:"gray.0",radius:"sm",children:e.jsxs(o,{justify:"space-between",align:"flex-start",children:[e.jsx(n,{fw:500,style:{flex:1},children:t.russianMeaning}),e.jsx(x,{value:t.russianMeaning,children:({copied:s,copy:r})=>e.jsx(j,{label:s?"Copied":"Copy",withArrow:!0,position:"left",children:e.jsx(m,{color:s?"teal":"gray",variant:"subtle",onClick:r,children:s?"âœ“":"ðŸ“‹"})})})]})})]}),e.jsxs("div",{children:[e.jsx(n,{size:"sm",c:"dimmed",mb:"xs",children:"Phrase:"}),e.jsx(c,{p:"md",bg:"gray.0",radius:"sm",children:e.jsxs(o,{justify:"space-between",align:"center",children:[e.jsx(n,{fw:500,children:i.Phrase}),e.jsx(x,{value:i.Phrase,children:({copied:s,copy:r})=>e.jsx(j,{label:s?"Copied":"Copy",withArrow:!0,position:"left",children:e.jsx(m,{color:s?"teal":"gray",variant:"subtle",onClick:r,children:s?"âœ“":"ðŸ“‹"})})})]})})]}),e.jsxs("div",{children:[e.jsx(n,{size:"sm",c:"dimmed",mb:"xs",children:"Phrase with stress marks:"}),e.jsx(c,{p:"md",bg:"gray.0",radius:"sm",children:e.jsxs(o,{justify:"space-between",align:"center",children:[e.jsx(n,{fw:500,children:i.PhraseStress}),e.jsx(x,{value:i.PhraseStress,children:({copied:s,copy:r})=>e.jsx(j,{label:s?"Copied":"Copy",withArrow:!0,position:"left",children:e.jsx(m,{color:s?"teal":"gray",variant:"subtle",onClick:r,children:s?"âœ“":"ðŸ“‹"})})})]})})]}),e.jsxs("div",{children:[e.jsx(n,{size:"sm",c:"dimmed",mb:"xs",children:"Audio:"}),e.jsx(c,{p:"md",bg:"gray.0",radius:"sm",children:e.jsxs(o,{justify:"space-between",align:"center",wrap:"nowrap",children:[e.jsxs("audio",{controls:!0,style:{flex:1},children:[e.jsx("source",{src:i.Audio,type:"audio/mpeg"}),"Your browser does not support the audio element."]}),e.jsx(x,{value:a?i.Audio+".mp3":i.Audio,children:({copied:s,copy:r})=>e.jsx(j,{label:s?"Copied":"Copy",withArrow:!0,position:"left",children:e.jsx(m,{color:s?"teal":"gray",variant:"subtle",onClick:r,children:s?"âœ“":"ðŸ“‹"})})})]})})]})]}):e.jsx(n,{c:"red",children:"Failed to load word data"})]}),t&&e.jsx(w,{searchQuery:l})]})}function A({phrase:i,onSelectWords:l,selectedWords:t}){const u=i.Phrase.split(/\s+/),h=r=>{s(d=>d.includes(r)?d.filter(f=>f!==r):[...d,r])},[a,s]=g.useState([]);return e.jsx(c,{p:"lg",radius:"md",withBorder:!0,children:e.jsxs(b,{gap:"md",children:[e.jsxs("div",{children:[e.jsx(n,{size:"sm",c:"dimmed",mb:"md",children:"Click on words to select them, then confirm:"}),e.jsx(c,{p:"md",bg:"gray.0",radius:"sm",style:{lineHeight:1.8,minHeight:"80px",display:"flex",alignItems:"center"},children:e.jsx(o,{gap:"xs",wrap:"wrap",children:u.map((r,d)=>e.jsx(p,{variant:a.includes(r)?"filled":"light",size:"sm",onClick:()=>h(r),style:{cursor:"pointer"},children:r},d))})})]}),a.length>0&&e.jsxs(o,{justify:"flex-end",children:[e.jsx(p,{variant:"light",onClick:()=>s([]),children:"Clear Selection"}),e.jsxs(p,{onClick:()=>l(a),children:["Create Flashcards (",a.length,")"]})]})]})})}export{k as F,A as S};
