import{w as V,b as a,t as e}from"./index-CWD__XTI.js";import{T as H,S as J,P as h,G as f,f as M,a as O,b as L}from"./api-Dx5E7QKq.js";import{h as Q,T as c,B as u}from"./AuthProvider-DIbg4P3B.js";import{F as U,S as X}from"./SentenceCard-Ox8cRk-7.js";import{T as Y}from"./TextInput-i3HMMitU.js";import"./Tooltip-BmlxqTPC.js";import"./OptionalPortal-CAJ6Pykm.js";import"./use-isomorphic-effect-Chui70N-.js";function ce({}){return[{title:"All Sentences"}]}const ie=V(function(){const[r,p]=a.useState("1"),[o,b]=a.useState([]),[C,m]=a.useState([]),[d,x]=a.useState(0),[_,ee]=a.useState(!0),[T,S]=a.useState(!1),[i,y]=a.useState(null),[n,F]=a.useState(null),[v,N]=a.useState(null),[P,k]=a.useState(""),[A,I]=a.useState(!1),{acquireToken:g}=Q();a.useEffect(()=>{(async()=>{try{const t=await g(),l=await M(t);F(l)}catch(t){console.debug("Could not acquire token for card count",t)}})()},[g]),a.useEffect(()=>{(async()=>{S(!0),N(null);try{const t=await g(),l=await O(r,t);l?y(l):(N("Card not found"),y(null))}catch(t){console.debug("Could not acquire token or fetch phrase",t)}finally{S(!1)}})()},[r]);const z=async s=>{b(s),x(0),I(!0);try{if(i)try{const t=await g(),l=await Promise.all(s.map(w=>L(w,i.Phrase,t,!1)));m(l)}catch(t){console.debug("Could not acquire token for word data",t);const l=await Promise.all(s.map(w=>L(w,i.Phrase,void 0,!1)));m(l)}}catch(t){console.error("Failed to fetch word data:",t),m([])}finally{I(!1)}},E=()=>{b([]),m([]),x(0)},G=()=>{d>0&&x(s=>s-1)},B=()=>{d<o.length-1&&x(s=>s+1)},q=d===0,D=d===o.length-1,$=()=>{const s=parseInt(r)-1;s>=1&&p(String(s))},K=()=>{if(!j){const s=parseInt(r)+1;p(String(s))}},R=r==="1",j=n!==null&&parseInt(r)===n,W=()=>{const s=P.trim();if(s&&/^\d+$/.test(s)){const t=parseInt(s);(n===null||t>=1&&t<=n)&&(p(s),k(""))}};return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx(H,{order:1,className:"text-3xl font-bold text-gray-900 mb-2",children:"All Sentences"}),e.jsx(c,{c:"dimmed",size:"lg",children:"Select words from sentences to create flashcards"})]}),e.jsxs(J,{gap:"xl",children:[e.jsx(h,{p:"md",className:"bg-white border border-gray-200 shadow-sm",radius:"lg",children:e.jsxs(f,{justify:"space-between",align:"center",children:[e.jsxs(c,{size:"sm",c:"dimmed",className:"flex items-center gap-2",children:[e.jsx("span",{children:"üìä"}),n!==null?e.jsxs(e.Fragment,{children:["Viewing card ",e.jsx("strong",{children:r})," of ",e.jsx("strong",{children:n})]}):e.jsxs(e.Fragment,{children:["Card ",e.jsx("strong",{children:r})]})]}),e.jsxs(f,{gap:"xs",wrap:"nowrap",children:[e.jsx(Y,{placeholder:"Go to card...",value:P,onChange:s=>k(s.currentTarget.value),onKeyPress:s=>{s.key==="Enter"&&W()},size:"sm",w:120,className:"transition-all focus-within:shadow-sm"}),e.jsx(u,{onClick:W,variant:"light",size:"sm",className:"hover:shadow-sm transition-all",children:"Go"})]})]})}),T?e.jsx(h,{p:"xl",radius:"lg",shadow:"sm",className:"bg-white border border-gray-100",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(c,{c:"dimmed",children:"Loading card..."})})}):v?e.jsx(h,{p:"xl",radius:"lg",shadow:"sm",className:"bg-white border border-red-100",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(c,{c:"red",fw:500,children:v})})}):i?e.jsxs(e.Fragment,{children:[o.length>0?e.jsx(e.Fragment,{children:A?e.jsx(h,{p:"xl",radius:"lg",shadow:"sm",className:"bg-white border border-gray-100",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(c,{c:"dimmed",children:"Creating flashcards..."})})}):C.length>0?e.jsxs(e.Fragment,{children:[e.jsx(U,{phrase:i,selectedWord:o[d],wordData:C[d],isLoading:!1,onBack:E}),e.jsx(h,{p:"md",className:"bg-white border border-gray-200 shadow-sm",radius:"lg",children:e.jsxs(f,{justify:"space-between",children:[e.jsx(u,{variant:"light",onClick:G,disabled:q,leftSection:e.jsx("span",{children:"‚Üê"}),className:"hover:shadow-sm transition-all",children:"Previous Word"}),e.jsx("div",{className:"px-4 py-2 bg-blue-50 rounded-full",children:e.jsxs(c,{size:"sm",fw:600,c:"blue.7",children:[d+1," / ",o.length]})}),e.jsx(u,{variant:"light",onClick:B,disabled:D,rightSection:e.jsx("span",{children:"‚Üí"}),className:"hover:shadow-sm transition-all",children:"Next Word"})]})})]}):null}):e.jsx(X,{phrase:i,onSelectWords:z,selectedWords:o}),o.length===0&&e.jsx(h,{p:"md",className:"bg-white border border-gray-200 shadow-sm",radius:"lg",children:e.jsxs(f,{justify:"space-between",children:[e.jsx(u,{variant:"light",onClick:$,disabled:R,leftSection:e.jsx("span",{children:"‚Üê"}),className:"hover:shadow-sm transition-all",children:"Previous"}),e.jsx("div",{className:"px-4 py-2 bg-gray-100 rounded-full",children:e.jsxs(c,{size:"sm",fw:600,c:"gray.7",children:["Card ",r," ",n!==null?`/ ${n}`:""]})}),e.jsx(u,{variant:"light",onClick:K,disabled:j,rightSection:e.jsx("span",{children:"‚Üí"}),className:"hover:shadow-sm transition-all",children:j?"Last Card":"Next"})]})})]}):null]})]})});export{ie as default,ce as meta};
