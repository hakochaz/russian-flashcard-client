import{w as D,b as d,t as e}from"./index-CWD__XTI.js";import{S as E,T as U,G as j,P as N,d as C,g as W,b as T}from"./api-CuIHRb5R.js";import{h as G,T as P,B as S}from"./AuthProvider-DIbg4P3B.js";import{F as q,S as R}from"./SentenceCard-yGJGrL-H.js";import{C as v}from"./Container-D1gD7sw9.js";import{T as H}from"./TextInput-i3HMMitU.js";import"./Tooltip-BmlxqTPC.js";import"./OptionalPortal-CAJ6Pykm.js";import"./use-isomorphic-effect-Chui70N-.js";function $({}){return[{title:"Create Sentence Card"}]}const ee=D(function(){const[f,A]=d.useState(""),[s,l]=d.useState(null),[n,h]=d.useState([]),[p,i]=d.useState([]),[a,c]=d.useState(0),[F,g]=d.useState(!1),{acquireToken:b}=G(),k=()=>{l({CardId:"0",Phrase:f,PhraseStress:"",Audio:"",Translation:""}),h([]),i([]),c(0)},w=async r=>{h(r),c(0),g(!0);try{if(s)try{const o=await b(),[u,m,x]=await Promise.all([Promise.all(r.map(t=>T(t,s.Phrase,o))),C(s.Phrase,o),W(s.Phrase,o)]);i(u),l(t=>t&&{...t,Audio:m||t.Audio,PhraseStress:x||t.Phrase})}catch{const[u,m,x]=await Promise.all([Promise.all(r.map(t=>T(t,s.Phrase))),C(s.Phrase),W(s.Phrase)]);i(u),l(t=>t&&{...t,Audio:m||t.Audio,PhraseStress:x||t.Phrase})}}catch(o){console.error("Failed to fetch word data:",o),i([])}finally{g(!1)}},y=()=>{h([]),i([]),c(0)},I=()=>{a>0&&c(r=>r-1)},L=()=>{a<n.length-1&&c(r=>r+1)},B=a===0,z=a===n.length-1;return e.jsx(v,{size:"md",className:"pt-16 pb-16",children:e.jsxs(E,{gap:"lg",children:[e.jsxs("div",{children:[e.jsx(U,{order:2,children:"Create Sentence Cards"}),e.jsx(P,{mt:"sm",c:"dimmed",children:"Enter a sentence and select words to create flashcards"}),e.jsxs(j,{mt:"md",align:"center",children:[e.jsx(H,{placeholder:"Enter sentence",value:f,onChange:r=>A(r.currentTarget.value),size:"md",style:{flex:1}}),e.jsx(S,{onClick:k,variant:"light",size:"sm",ml:"sm",children:"Use"})]})]}),s?e.jsx(e.Fragment,{children:n.length>0?e.jsx(e.Fragment,{children:F?e.jsx(N,{p:"lg",radius:"md",withBorder:!0,children:e.jsx(P,{children:"Creating flashcards..."})}):p.length>0?e.jsxs(e.Fragment,{children:[e.jsx(q,{phrase:s,selectedWord:n[a],wordData:p[a],isLoading:!1,onBack:y}),e.jsxs(j,{justify:"space-between",mt:"xl",children:[e.jsx(S,{variant:"subtle",onClick:I,disabled:B,children:"Previous"}),e.jsxs(P,{c:"dimmed",children:[a+1," / ",n.length]}),e.jsx(S,{variant:"subtle",onClick:L,disabled:z,children:"Next"})]})]}):null}):e.jsx(R,{phrase:s,onSelectWords:w,selectedWords:n})}):null]})})});export{ee as default,$ as meta};
