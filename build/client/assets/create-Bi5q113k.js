import{w as D,a as d,p as e}from"./chunk-EPOLDU6W-Db15p_wQ.js";import{C as E,S as U,T as N,G as j,B as p,P as G,d as C,g as W,b as T}from"./api-CL2jyKQc.js";import{h as q,T as P}from"./AuthProvider-CdfIHCLy.js";import{F as R,S as v}from"./SentenceCard-m479rrWn.js";import{T as H}from"./TextInput-C_VJm8BD.js";import"./index-xUmu4QGa.js";import"./Tooltip-Dedj26oV.js";import"./OptionalPortal-C9rPZxQj.js";import"./use-isomorphic-effect-CHtvWNEI.js";function $({}){return[{title:"Create Sentence Card"}]}const ee=D(function(){const[S,A]=d.useState(""),[s,l]=d.useState(null),[n,h]=d.useState([]),[f,i]=d.useState([]),[a,c]=d.useState(0),[F,g]=d.useState(!1),{acquireToken:k}=q(),w=()=>{l({CardId:"0",Phrase:S,PhraseStress:"",Audio:"",Translation:""}),h([]),i([]),c(0)},b=async r=>{h(r),c(0),g(!0);try{if(s)try{const o=await k(),[u,m,x]=await Promise.all([Promise.all(r.map(t=>T(t,s.Phrase,o))),C(s.Phrase,o),W(s.Phrase,o)]);i(u),l(t=>t&&{...t,Audio:m||t.Audio,PhraseStress:x||t.Phrase})}catch{const[u,m,x]=await Promise.all([Promise.all(r.map(t=>T(t,s.Phrase))),C(s.Phrase),W(s.Phrase)]);i(u),l(t=>t&&{...t,Audio:m||t.Audio,PhraseStress:x||t.Phrase})}}catch(o){console.error("Failed to fetch word data:",o),i([])}finally{g(!1)}},y=()=>{h([]),i([]),c(0)},I=()=>{a>0&&c(r=>r-1)},L=()=>{a<n.length-1&&c(r=>r+1)},B=a===0,z=a===n.length-1;return e.jsx(E,{size:"md",className:"pt-16 pb-16",children:e.jsxs(U,{gap:"lg",children:[e.jsxs("div",{children:[e.jsx(N,{order:2,children:"Create Sentence Cards"}),e.jsx(P,{mt:"sm",c:"dimmed",children:"Enter a sentence and select words to create flashcards"}),e.jsxs(j,{mt:"md",align:"center",children:[e.jsx(H,{placeholder:"Enter sentence",value:S,onChange:r=>A(r.currentTarget.value),size:"md",style:{flex:1}}),e.jsx(p,{onClick:w,variant:"light",size:"sm",ml:"sm",children:"Use"})]})]}),s?e.jsx(e.Fragment,{children:n.length>0?e.jsx(e.Fragment,{children:F?e.jsx(G,{p:"lg",radius:"md",withBorder:!0,children:e.jsx(P,{children:"Creating flashcards..."})}):f.length>0?e.jsxs(e.Fragment,{children:[e.jsx(R,{phrase:s,selectedWord:n[a],wordData:f[a],isLoading:!1,onBack:y}),e.jsxs(j,{justify:"space-between",mt:"xl",children:[e.jsx(p,{variant:"subtle",onClick:I,disabled:B,children:"Previous"}),e.jsxs(P,{c:"dimmed",children:[a+1," / ",n.length]}),e.jsx(p,{variant:"subtle",onClick:L,disabled:z,children:"Next"})]})]}):null}):e.jsx(v,{phrase:s,onSelectWords:b,selectedWords:n})}):null]})})});export{ee as default,$ as meta};
