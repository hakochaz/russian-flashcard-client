import{w as z,a as t,p as e}from"./chunk-EPOLDU6W-Db15p_wQ.js";import{C as k,S as f,T as C,G as o,B as P,P as c,A as T,j as b,k as B}from"./api-TiMZYRdJ.js";import{h as F,T as n}from"./AuthProvider-B78M3Mu0.js";import{T as E}from"./TextInput-DMgR66im.js";import"./index-xUmu4QGa.js";import"./use-isomorphic-effect-CHtvWNEI.js";function M({}){return[{title:"Forvo Word Search"}]}const N=z(function(){const[i,g]=t.useState(""),[a,h]=t.useState([]),[u,m]=t.useState(!1),[w,y]=t.useState(!1),[d,x]=t.useState(null),p=t.useRef([]),{acquireToken:S}=F(),v=s=>{const r=p.current[s];r&&(r.currentTime=0,r.play())},j=async()=>{const s=i.trim();if(s){m(!0),y(!0),x(null),h([]);try{const r=await S(),l=await b(s,r);h(B(l))}catch(r){console.debug("Could not acquire token or fetch pronunciations",r),x("Could not load pronunciations")}finally{m(!1)}}};return e.jsx(k,{size:"md",className:"pt-16 pb-16",children:e.jsxs(f,{gap:"lg",children:[e.jsxs("div",{children:[e.jsx(C,{order:2,children:"Forvo Word Search"}),e.jsx(n,{mt:"sm",c:"dimmed",children:"Search for a single Russian word with native speaker pronunciations"})]}),e.jsxs(o,{gap:"sm",children:[e.jsx(E,{placeholder:"Enter a word to search...",value:i,onChange:s=>g(s.currentTarget.value),onKeyPress:s=>{s.key==="Enter"&&j()},style:{flex:1}}),e.jsx(P,{onClick:j,loading:u,children:"Search"})]}),w&&!u&&a.length===0&&!d&&e.jsx(c,{p:"lg",radius:"md",withBorder:!0,children:e.jsxs(n,{c:"dimmed",children:['No results found for "',i,'"']})}),d&&e.jsx(c,{p:"lg",radius:"md",withBorder:!0,children:e.jsx(n,{c:"red",children:d})}),a.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(c,{p:"xl",radius:"md",withBorder:!0,bg:"blue.0",children:e.jsx(n,{size:"xl",fw:600,ta:"center",style:{lineHeight:1.6},children:i.trim()})}),e.jsxs("div",{children:[e.jsx(o,{justify:"space-between",align:"center",mb:"md",children:e.jsxs(n,{size:"sm",c:"dimmed",fw:500,children:["Pronunciations (",a.length,"):"]})}),e.jsx(f,{gap:"sm",children:a.map((s,r)=>e.jsx(c,{p:"md",radius:"md",withBorder:!0,bg:"gray.0",children:e.jsxs(o,{gap:"xl",align:"center",wrap:"nowrap",children:[e.jsx(T,{size:"xl",radius:"xl",variant:"filled",color:"blue",onClick:()=>v(r),children:"â–¶"}),e.jsx("audio",{ref:l=>{p.current[r]=l},style:{display:"none"},children:e.jsx("source",{src:s.audioMp3,type:"audio/mpeg"})}),e.jsxs(o,{gap:"lg",wrap:"nowrap",style:{flex:1},children:[e.jsxs("div",{children:[e.jsx(n,{size:"xs",c:"dimmed",children:"Username"}),e.jsx(n,{size:"sm",fw:500,children:s.username})]}),e.jsxs("div",{children:[e.jsx(n,{size:"xs",c:"dimmed",children:"Gender"}),e.jsx(n,{size:"sm",fw:500,children:s.sex==="m"?"Male":s.sex==="f"?"Female":s.sex})]}),e.jsxs("div",{children:[e.jsx(n,{size:"xs",c:"dimmed",children:"Country"}),e.jsx(n,{size:"sm",fw:500,children:s.country})]})]})]})},r))})]})]})]})})});export{N as default,M as meta};
