import{w as z,b as n,t as e}from"./index-CWD__XTI.js";import{S as f,T as b,G as o,P as c,A as C,i as P,j as T}from"./api-Dx5E7QKq.js";import{h as k,T as t,B}from"./AuthProvider-DIbg4P3B.js";import{C as F}from"./Container-D1gD7sw9.js";import{T as E}from"./TextInput-i3HMMitU.js";import"./use-isomorphic-effect-Chui70N-.js";function M({}){return[{title:"Forvo Word Search"}]}const N=z(function(){const[i,g]=n.useState(""),[a,h]=n.useState([]),[u,m]=n.useState(!1),[w,y]=n.useState(!1),[d,x]=n.useState(null),j=n.useRef([]),{acquireToken:S}=k(),v=s=>{const r=j.current[s];r&&(r.currentTime=0,r.play())},p=async()=>{const s=i.trim();if(s){m(!0),y(!0),x(null),h([]);try{const r=await S(),l=await P(s,r);h(T(l))}catch(r){console.debug("Could not acquire token or fetch pronunciations",r),x("Could not load pronunciations")}finally{m(!1)}}};return e.jsx(F,{size:"md",className:"pt-16 pb-16",children:e.jsxs(f,{gap:"lg",children:[e.jsxs("div",{children:[e.jsx(b,{order:2,children:"Forvo Word Search"}),e.jsx(t,{mt:"sm",c:"dimmed",children:"Search for a single Russian word with native speaker pronunciations"})]}),e.jsxs(o,{gap:"sm",children:[e.jsx(E,{placeholder:"Enter a word to search...",value:i,onChange:s=>g(s.currentTarget.value),onKeyPress:s=>{s.key==="Enter"&&p()},style:{flex:1}}),e.jsx(B,{onClick:p,loading:u,children:"Search"})]}),w&&!u&&a.length===0&&!d&&e.jsx(c,{p:"lg",radius:"md",withBorder:!0,children:e.jsxs(t,{c:"dimmed",children:['No results found for "',i,'"']})}),d&&e.jsx(c,{p:"lg",radius:"md",withBorder:!0,children:e.jsx(t,{c:"red",children:d})}),a.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(c,{p:"xl",radius:"md",withBorder:!0,bg:"blue.0",children:e.jsx(t,{size:"xl",fw:600,ta:"center",style:{lineHeight:1.6},children:i.trim()})}),e.jsxs("div",{children:[e.jsx(o,{justify:"space-between",align:"center",mb:"md",children:e.jsxs(t,{size:"sm",c:"dimmed",fw:500,children:["Pronunciations (",a.length,"):"]})}),e.jsx(f,{gap:"sm",children:a.map((s,r)=>e.jsx(c,{p:"md",radius:"md",withBorder:!0,bg:"gray.0",children:e.jsxs(o,{gap:"xl",align:"center",wrap:"nowrap",children:[e.jsx(C,{size:"xl",radius:"xl",variant:"filled",color:"blue",onClick:()=>v(r),children:"â–¶"}),e.jsx("audio",{ref:l=>{j.current[r]=l},style:{display:"none"},children:e.jsx("source",{src:s.audioMp3,type:"audio/mpeg"})}),e.jsxs(o,{gap:"lg",wrap:"nowrap",style:{flex:1},children:[e.jsxs("div",{children:[e.jsx(t,{size:"xs",c:"dimmed",children:"Username"}),e.jsx(t,{size:"sm",fw:500,children:s.username})]}),e.jsxs("div",{children:[e.jsx(t,{size:"xs",c:"dimmed",children:"Gender"}),e.jsx(t,{size:"sm",fw:500,children:s.sex==="m"?"Male":s.sex==="f"?"Female":s.sex})]}),e.jsxs("div",{children:[e.jsx(t,{size:"xs",c:"dimmed",children:"Country"}),e.jsx(t,{size:"sm",fw:500,children:s.country})]})]})]})},r))})]})]})]})})});export{N as default,M as meta};
