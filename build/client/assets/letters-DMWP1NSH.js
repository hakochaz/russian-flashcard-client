import{w as A,a as i,p as e}from"./chunk-EPOLDU6W-Db15p_wQ.js";import{C as B,S as w,G as c,T as I,P as d,A as S,B as y,j as T,k as E}from"./api-CL2jyKQc.js";import{h as F,T as r}from"./AuthProvider-CdfIHCLy.js";import"./index-xUmu4QGa.js";const l=["а","б","в","г","д","е","ё","ж","з","и","й","к","л","м","н","о","п","р","с","т","у","ф","х","ц","ч","ш","щ","ъ","ы","ь","э","ю","я"];function H({}){return[{title:"Letters"}]}const U=A(function(){const[n,x]=i.useState(0),[o,h]=i.useState([]),[b,m]=i.useState(!0),[j,p]=i.useState(null),f=i.useRef([]),{acquireToken:g}=F(),u=l[n],v=s=>{const t=f.current[s];t&&(t.currentTime=0,t.play())};i.useEffect(()=>{let s=!0;return(async()=>{m(!0),p(null);try{const a=await g(),k=await T(u,a);s&&h(E(k))}catch(a){console.debug("Could not acquire token or fetch pronunciations",a),s&&(p("Could not load pronunciations"),h([]))}finally{s&&m(!1)}})(),()=>{s=!1}},[u,g]);const P=()=>{n>0&&x(s=>s-1)},z=()=>{n<l.length-1&&x(s=>s+1)},C=n===0,L=n===l.length-1;return e.jsx(B,{size:"md",className:"pt-16 pb-16",children:e.jsxs(w,{gap:"lg",children:[e.jsx(c,{justify:"space-between",align:"flex-end",wrap:"wrap",children:e.jsxs("div",{children:[e.jsx(I,{order:2,children:"Letters"}),e.jsx(r,{mt:"sm",c:"dimmed",children:"Practice pronunciation for Russian letters"})]})}),b?e.jsx(d,{p:"lg",radius:"md",withBorder:!0,children:e.jsx(r,{children:"Loading pronunciations..."})}):j?e.jsx(d,{p:"lg",radius:"md",withBorder:!0,children:e.jsx(r,{c:"red",children:j})}):e.jsxs(e.Fragment,{children:[e.jsx(d,{p:"xl",radius:"md",withBorder:!0,bg:"blue.0",children:e.jsx(r,{size:"xl",fw:600,ta:"center",style:{lineHeight:1.6},children:u})}),e.jsxs("div",{children:[e.jsx(c,{justify:"space-between",align:"center",mb:"md",children:e.jsxs(r,{size:"sm",c:"dimmed",fw:500,children:["Pronunciations (",o.length,"):"]})}),e.jsx(w,{gap:"sm",children:o.length>0?o.map((s,t)=>e.jsx(d,{p:"md",radius:"md",withBorder:!0,bg:"gray.0",children:e.jsxs(c,{gap:"xl",align:"center",wrap:"nowrap",children:[e.jsx(S,{size:"xl",radius:"xl",variant:"filled",color:"blue",onClick:()=>v(t),children:"▶"}),e.jsx("audio",{ref:a=>{f.current[t]=a},style:{display:"none"},children:e.jsx("source",{src:s.audioMp3,type:"audio/mpeg"})}),e.jsxs(c,{gap:"lg",wrap:"nowrap",style:{flex:1},children:[e.jsxs("div",{children:[e.jsx(r,{size:"xs",c:"dimmed",children:"Username"}),e.jsx(r,{size:"sm",fw:500,children:s.username})]}),e.jsxs("div",{children:[e.jsx(r,{size:"xs",c:"dimmed",children:"Gender"}),e.jsx(r,{size:"sm",fw:500,children:s.sex==="m"?"Male":s.sex==="f"?"Female":s.sex})]}),e.jsxs("div",{children:[e.jsx(r,{size:"xs",c:"dimmed",children:"Country"}),e.jsx(r,{size:"sm",fw:500,children:s.country})]})]})]})},t)):e.jsx(d,{p:"md",radius:"md",withBorder:!0,children:e.jsx(r,{c:"dimmed",children:"No pronunciations available"})})})]}),e.jsxs(c,{justify:"space-between",mt:"xl",children:[e.jsx(y,{variant:"subtle",onClick:P,disabled:C,children:"← Previous"}),e.jsxs(r,{c:"dimmed",children:[n+1," / ",l.length]}),e.jsx(y,{variant:"subtle",onClick:z,disabled:L,children:"Next →"})]})]})]})})});export{U as default,H as meta};
