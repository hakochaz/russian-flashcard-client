import{w as A,b as i,t as e}from"./index-CWD__XTI.js";import{S as b,G as a,T as B,P as c,A as E,j as I,k as S}from"./api-CO88OdlV.js";import{h as T,T as r,B as v}from"./AuthProvider-DIbg4P3B.js";import{C as R}from"./Container-D1gD7sw9.js";const o=["а","б","в","г","д","е","ё","ж","з","и","й","к","л","м","н","о","п","р","с","т","у","ф","х","ц","ч","ш","щ","ъ","ы","ь","э","ю","я"];function H({}){return[{title:"Letters"}]}const K=A(function(){const[n,h]=i.useState(0),[l,x]=i.useState([]),[P,m]=i.useState(!0),[j,f]=i.useState(null),p=i.useRef([]),{acquireToken:w}=T(),u=o[n],k=s=>{const t=p.current[s];t&&(t.currentTime=0,t.play())};i.useEffect(()=>{let s=!0;return(async()=>{m(!0),f(null);try{const d=await w(),C=await I(u,d);s&&x(S(C))}catch(d){console.debug("Could not acquire token or fetch pronunciations",d),s&&(f("Could not load pronunciations"),x([]))}finally{s&&m(!1)}})(),()=>{s=!1}},[u,w]),i.useEffect(()=>{const s=t=>{t.key==="ArrowLeft"?g():t.key==="ArrowRight"&&y()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[n]);const g=()=>{n>0&&h(s=>s-1)},y=()=>{n<o.length-1&&h(s=>s+1)},L=n===0,z=n===o.length-1;return e.jsx(R,{size:"md",className:"pt-16 pb-16",children:e.jsxs(b,{gap:"lg",children:[e.jsx(a,{justify:"space-between",align:"flex-end",wrap:"wrap",children:e.jsxs("div",{children:[e.jsx(B,{order:2,children:"Letters"}),e.jsx(r,{mt:"sm",c:"dimmed",children:"Practice pronunciation for Russian letters"})]})}),P?e.jsx(c,{p:"lg",radius:"md",withBorder:!0,children:e.jsx(r,{children:"Loading pronunciations..."})}):j?e.jsx(c,{p:"lg",radius:"md",withBorder:!0,children:e.jsx(r,{c:"red",children:j})}):e.jsxs(e.Fragment,{children:[e.jsx(c,{p:"xl",radius:"md",withBorder:!0,bg:"blue.0",children:e.jsx(r,{size:"xl",fw:600,ta:"center",style:{lineHeight:1.6},children:u})}),e.jsxs("div",{children:[e.jsx(a,{justify:"space-between",align:"center",mb:"md",children:e.jsxs(r,{size:"sm",c:"dimmed",fw:500,children:["Pronunciations (",l.length,"):"]})}),e.jsx(b,{gap:"sm",children:l.length>0?l.map((s,t)=>e.jsx(c,{p:"md",radius:"md",withBorder:!0,bg:"gray.0",children:e.jsxs(a,{gap:"xl",align:"center",wrap:"nowrap",children:[e.jsx(E,{size:"xl",radius:"xl",variant:"filled",color:"blue",onClick:()=>k(t),children:"▶"}),e.jsx("audio",{ref:d=>{p.current[t]=d},style:{display:"none"},children:e.jsx("source",{src:s.audioMp3,type:"audio/mpeg"})}),e.jsxs(a,{gap:"lg",wrap:"nowrap",style:{flex:1},children:[e.jsxs("div",{children:[e.jsx(r,{size:"xs",c:"dimmed",children:"Username"}),e.jsx(r,{size:"sm",fw:500,children:s.username})]}),e.jsxs("div",{children:[e.jsx(r,{size:"xs",c:"dimmed",children:"Gender"}),e.jsx(r,{size:"sm",fw:500,children:s.sex==="m"?"Male":s.sex==="f"?"Female":s.sex})]}),e.jsxs("div",{children:[e.jsx(r,{size:"xs",c:"dimmed",children:"Country"}),e.jsx(r,{size:"sm",fw:500,children:s.country})]})]})]})},t)):e.jsx(c,{p:"md",radius:"md",withBorder:!0,children:e.jsx(r,{c:"dimmed",children:"No pronunciations available"})})})]}),e.jsxs(a,{justify:"space-between",mt:"xl",children:[e.jsx(v,{variant:"subtle",onClick:g,disabled:L,children:"← Previous"}),e.jsxs(r,{c:"dimmed",children:[n+1," / ",o.length]}),e.jsx(v,{variant:"subtle",onClick:y,disabled:z,children:"Next →"})]})]})]})})});export{K as default,H as meta};
